<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Fortune Cookie Reveal</title>

<link rel="icon" type="image/png" href="fortune.png">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Allura&display=swap">

<style>

body{
 margin:0; padding:0;
 background:#FFE1AF;
 font-family:'Allura',cursive;
 border:25px double #957C62;
 color:#B77466;
 min-height:100vh;
 box-shadow: inset 0 0 60px rgba(0,0,0,.15);
 overflow-x:hidden;
 position:relative;
 display:flex;
 flex-direction:column;
 align-items:center;
}

#cookieHeading{
 font-size:60px;
 margin:40px 0 20px 0;
}

#cookieImg{
 width:200px;
 cursor:pointer;
 transition: transform .2s , opacity .5s;
}

#cookieMsg{
 font-size:40px;
 text-align:center;
 color:#B77466;
 opacity:0;
 margin-top:50px;
 transition:opacity 1s;
}

.main-btn{
 margin-top:40px;
 padding:12px 35px;
 background:#B77466;
 color:white;
 border:none; border-radius:40px;
 font-size:28px;
 cursor:pointer;
 text-decoration:none;
 display:none;
 box-shadow:0 0 15px rgba(183,116,102,.8),
            0 0 30px rgba(183,116,102,.5);
 transition:.2s;
}
.main-btn:hover{
 transform:scale(1.05);
 box-shadow:0 0 25px rgba(183,116,102,1),
             0 0 50px rgba(183,116,102,.7);
}

.small-btn{
 margin-top:20px;
 padding:10px 30px;
 background:#FFE1AF;
 color:#B77466;
 border:3px solid #B77466;
 border-radius:35px;
 font-size:26px;
 cursor:pointer;
 display:none;
}
.small-btn:disabled{
 background:#B77466;
 color:white;
 cursor:default;
}

.sparkle{
 position:fixed;
 width:12px; height:12px;
 background: radial-gradient(circle,#ff6a8e 0%, rgba(255,106,142,0) 70%);
 border-radius:50%;
 top:-20px; opacity:.9;
 pointer-events:none; filter:blur(1px);
 animation:drift 7s linear infinite;
}

@keyframes drift{
 0%{ transform:translateY(0) translateX(0) scale(1); opacity:1 }
 50%{transform:translateY(40vh) translateX(20px) scale(1.2); opacity:.8}
 100%{transform:translateY(100vh) translateX(-20px) scale(1); opacity:0}
}

</style>
</head>

<body>

<h1 id="cookieHeading">Cookie</h1>

<img id="cookieImg" src="cookie.png">

<div id="cookieMsg"></div>

<button class="main-btn" id="saveBtn">Save</button>

<button class="small-btn" id="collectedBtn">Collected</button>

<button class="small-btn" id="storeBtn">Store</button>

<div id="sparkles"></div>

<script>

const sparkles=document.getElementById("sparkles");
for(let i=0;i<35;i++){
 let s=document.createElement("div");
 s.className="sparkle";
 s.style.left = (Math.random()*100) +"vw";
 s.style.height=s.style.width = (10 + Math.random()*8)+"px";
 s.style.animationDelay = (Math.random()*6)+"s";
 s.style.opacity = .6 + Math.random()*.4;
 sparkles.appendChild(s);
}

const urlParams=new URLSearchParams(window.location.search);
const cookieType = urlParams.get("cookie") || "1";

const heading=document.getElementById("cookieHeading"),
      cookieImg=document.getElementById("cookieImg"),
      cookieMsg=document.getElementById("cookieMsg"),
      saveBtn=document.getElementById("saveBtn"),
      collectedBtn=document.getElementById("collectedBtn"),
      storeBtn=document.getElementById("storeBtn");

const messages={
1:["Luck finds you soon!","A surprise awaits you!","Your dreams will bloom!","Fortune smiles on you!","An unexpected gain is near!","Lucky moment ahead!","Good vibes come soon!","Golden opportunity rises!","Joy is around the corner!","Happiness approaches!"],
2:["Wisdom comes your way.","A new idea forms soon.","Knowledge guides you.","Insight helps today!","Clarity rises.","Your mind shines bright!","Learning pays off!","Answers are near!","Focus brings success!","Intuition is strong!"],
3:["Energy flows your way.","You feel motivated.","Your spirit glows bright!","Strength rises.","A boost arrives.","Vitality surrounds you!","Confidence grows.","Courage appears.","Action brings reward.","Keep moving forward!"]
};

const headings={1:"Lucky Star Cookie",2:"Wisdom Cookie",3:"Energy Cookie"};
heading.textContent = headings[cookieType];

cookieImg.src = "cookie.png";

let clickCount=0, clicksToFade=5, revealed=false, finalMessage="";

cookieImg.addEventListener("click",()=>{
 if(revealed) return;

 clickCount++;

 cookieImg.style.transform=`rotate(${(Math.random()*20-10)}deg)`;
 setTimeout(()=> cookieImg.style.transform="rotate(0deg)",150);

 if(clickCount>=clicksToFade){
      revealed=true;
      cookieImg.style.opacity=0;

      finalMessage = messages[cookieType][Math.floor(Math.random()*messages[cookieType].length)];

   setTimeout(()=>{
      cookieMsg.textContent = finalMessage;
      cookieMsg.style.opacity=1;

      saveBtn.style.display="inline-block";
      collectedBtn.style.display="inline-block";
      storeBtn.style.display="inline-block";
   },600);
 }
});

saveBtn.addEventListener("click",()=>{
 let stored = JSON.parse(localStorage.getItem("fortuneCollection")) || {1:[],2:[],3:[]};
 stored[cookieType].push(finalMessage);
 localStorage.setItem("fortuneCollection", JSON.stringify(stored));
 saveBtn.textContent="Saved";
 saveBtn.style.background="#8C5A50";
 saveBtn.disabled=true;
});

collectedBtn.addEventListener("click",()=>{
 window.location.href="collection.html";
});

storeBtn.addEventListener("click",()=>{
 window.location.href="shop.html";
});


/* Creates 35 floating sparkles for background animation */

/* Detect which cookie type was selected from URL */

/* Get references to heading, image, message, and buttons */

/* Message list: each cookie type has 10 possible fortunes */

/* Set the page heading based on the selected cookie type */

/* Cookie clicking system: rotates cookie + counts clicks until reveal */

/* Reveal logic: hide cookie, show random fortune, show all buttons */

/* Save button: stores the revealed message in localStorage */

/* Collected button: takes user to collection page */

/* Store button: takes user to shop.html */
 
</script>

</body>
</html>
